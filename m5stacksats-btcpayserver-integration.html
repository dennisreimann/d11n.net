<!DOCTYPE html><html lang="en"><head><meta charset="UTF-8"/><meta http-equiv="X-UA-Compatible" content="ie=edge"/><meta name="viewport" content="width=device-width,initial-scale=1"/><meta name="keywords" content="BTCPay Server,M5StackSats,Open Source"/><meta name="description" content="There was no BTCPay Server integration for the M5StackSats project, yet. So I decided to build it as a way of learning a bit more about the new gadget.
"/><meta name="theme-color" content="#0d151e"/><meta name="lightning" content="lnurlp:donate@d11n.net"/><meta name="msapplication-TileColor" content="#0d151e"/><meta name="msapplication-config" content="/browserconfig.xml"/><meta property="twitter:creator" content="@dennisreimann"/><meta property="twitter:card" content="summary_large_image"/><meta property="twitter:title" content="BTCPay Server Integration for M5StackSats · d11n 🍯🦡⚡️🕗🔗"/><meta property="twitter:description" content="There was no BTCPay Server integration for the M5StackSats project, yet. So I decided to build it as a way of learning a bit more about the new gadget.
"/><meta property="twitter:image" content="https://d11n.net/images/m5stacksats/btcpayserver-integration.jpg"/><link rel="apple-touch-icon" sizes="180x180" href="/images/favicon/apple-touch-icon.png"/><link rel="icon" type="image/png" sizes="32x32" href="/images/favicon/favicon-32x32.png"/><link rel="icon" type="image/png" sizes="16x16" href="/images/favicon/favicon-16x16.png"/><link rel="mask-icon" href="/images/favicon/safari-pinned-tab.svg" color="#0d151e"/><link rel="stylesheet" href="/styles/main.css"/><link rel="manifest" href="/site.webmanifest"/><title>BTCPay Server Integration for M5StackSats · d11n 🍯🦡⚡️🕗🔗</title></head><body><header class="header"><div class="wrap"><a class="home" href="/"><svg viewbox="0 0 423 369" xmlns="http://www.w3.org/2000/svg" class="logo">
  <g fill-rule="nonzero" fill="none">
    <path d="M225.233 70.6l-51.9 297.4h-45.6L179.63 70.6h45.603zm82-70l-51.9 297.4h-45.6L261.63.6h45.603z" class="accent" />
    <path d="M422.2 174c0 3.8-.25 8.1-.75 12.9-.5 4.8-1.25 9.6-2.25 14.4L402.7 297h-43.8l16.8-95.7c.4-1.8.7-3.65.9-5.55.2-1.9.3-3.75.3-5.55 0-4.2-.85-7.8-2.55-10.8-1.7-3-4.95-4.5-9.75-4.5-6 0-11.15 2.85-15.45 8.55-4.3 5.7-7.25 13.05-8.85 22.05L324.4 297h-43.8l20.7-117.9 1.5-9.15c.6-3.7 1.15-7.4 1.65-11.1.444-3.289.889-6.38 1.333-9.274l.478-3.106c.337-2.247.583-4.07.739-5.47h41.4l-.204 1.463c-.278 2.033-.578 4.4-.9 7.1l-.246 2.087c-.5 4.3-1.05 8.35-1.65 12.15h.6c4-7.8 9.5-14.35 16.5-19.65 7-5.3 15.3-7.95 24.9-7.95 6.2 0 11.55 1.15 16.05 3.45 4.5 2.3 8.1 5.25 10.8 8.85 2.7 3.6 4.7 7.65 6 12.15 1.3 4.5 1.95 8.95 1.95 13.35zM155.1 70.2L115.5 297H73.8l3.3-20.1h-.3c-3.6 7-8.2 12.9-13.8 17.7-5.6 4.8-13.1 7.2-22.5 7.2-6.8 0-12.75-1.4-17.85-4.2-5.1-2.8-9.3-6.65-12.6-11.55-3.3-4.9-5.8-10.8-7.5-17.7C.85 261.45 0 253.9 0 245.7c0-12.2 1.45-24.75 4.35-37.65 2.9-12.9 7.2-24.7 12.9-35.4S29.9 153.2 38.1 146.4c8.2-6.8 17.7-10.2 28.5-10.2 9 0 15.8 2.05 20.4 6.15 4.6 4.1 7.5 9.45 8.7 16.05h.9l15.6-88.2h42.9zM74.4 173.7c-5.2 0-9.7 2.2-13.5 6.6-3.8 4.4-7 9.85-9.6 16.35-2.6 6.5-4.55 13.5-5.85 21-1.3 7.5-1.95 14.35-1.95 20.55 0 7.6 1.25 13.8 3.75 18.6 2.5 4.8 6.65 7.2 12.45 7.2 4.8 0 9.1-2.15 12.9-6.45 3.8-4.3 7-9.65 9.6-16.05 2.6-6.4 4.6-13.3 6-20.7 1.4-7.4 2.1-14.1 2.1-20.1 0-8-1.25-14.5-3.75-19.5s-6.55-7.5-12.15-7.5z" class="color" />
  </g>
</svg>
</a></div></header><main class="main"><div class="wrap"><div class="article m5stacksats-btcpayserver-integration"><h1 id="btcpay-server-integration-for-m5stacksats" tabindex="-1"><a class="header-anchor" href="#btcpay-server-integration-for-m5stacksats">#</a> BTCPay Server Integration for M5StackSats</h1>
<p>The <a href="https://github.com/arcbtc/M5StackSats">M5StackSats</a> is a Bitcoin point of sale terminal project by <a href="https://twitter.com/btcsocialist">@BTCSocialist</a>.
As the name implies, it builds on the <a href="https://m5stack.com/">M5Stack</a>:
The <a href="https://m5stack.com/collections/m5-core/products/face">M5 Faces hardware</a> becomes a PoS terminal, which can be used to sell goods for sats.</p>
<p>The process is straight forward:
The merchant enters the amount, which can be denominated in fiat currency.
The software integrates with one of many defined backends (like a BTCPay Server instance):
It gets the current exchange rate, generates a Lightning invoice and displays its QR code.
Then it polls the backend to check the payment status and shows a confirmation.</p>
<p>I found the idea of building a PoS terminal based on cheap hardware very intriguing and ordered a M5 Faces device.
Astonishingly, there was no BTCPay Server integration for the M5StackSats project, yet.
So I decided to build it as a way of learning a bit more about the new gadget.</p>
<p>It took me a bit of tinkering and familiarizing myself with Arduino and writing C, but <a href="https://twitter.com/_d11n_/status/1205998709592526848">it finally worked out</a>.
Here’s a short demo of the <a href="https://github.com/arcbtc/M5StackSats/tree/master/M5StackSatsOther/M5StackSatsBTCPAY">BTCPayServer integration for the M5StackSats</a> …</p>
<div class="ytEmbed">
  <iframe src="https://www.youtube.com/embed/Rw46PeELTCg" frameborder="0" allow="autoplay;encrypted-media;" allowfullscreen></iframe>
</div>
</div><h4>Liked this article?</h4>
<p>Say <em>thanks</em> with some sats <a href="lightning:LNURL1DP68GURN8GHJ7AMPD3KX2AR0VEEKZAR0WD5XJTNRDAKJ7TNHV4KXCTTTDEHHWM30D3H82UNVWQHKXUN0WAJX2ER9V9E8G6PN8QSKVTEZ">via Lightning</a>.</p>
<a href="lightning:LNURL1DP68GURN8GHJ7AMPD3KX2AR0VEEKZAR0WD5XJTNRDAKJ7TNHV4KXCTTTDEHHWM30D3H82UNVWQHKXUN0WAJX2ER9V9E8G6PN8QSKVTEZ">
<img src="/lnurl.png" alt="LNURL1DP68GURN8GHJ7AMPD3KX2AR0VEEKZAR0WD5XJTNRDAKJ7TNHV4KXCTTTDEHHWM30D3H82UNVWQHKXUN0WAJX2ER9V9E8G6PN8QSKVTEZ" style="width:256px;">
</a></div></main><footer class="footer"><div class="wrap"><p>Follow  <a href="/about.html">me</a> on <a href="https://twitter.com/_d11n_">Twitter</a> or <a href="https://github.com/dennisreimann">GitHub</a>.</p></div><div class="wrap"><p>Published at block height <time datetime="2019-12-15">608162</time>. <a href="https://github.com/dennisreimann/d11n.net/blob/master/articles/608162-m5stacksats-btcpayserver-integration.md">(GitHub)</a></p><p>Website last updated at block height <time datetime="2022-12-22">768483</time>.</p></div></footer></body></html>